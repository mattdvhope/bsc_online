<div class="front-main-hbs">

  {{> front/_welcome }}

  {{> front/_features }}

  {{> front/_get_started }}

</div>

<!-- nested modals in application_form.hbs -->
{{> front/_nested_modal }}
{{> front/_nested_modal_christian_worldview }}
{{> front/_nested_modal_cost_amount }}
{{> front/_nested_modal_payment_info }}
<!-- nested modals in application_form.hbs -->


<script>
  // Nested modals ... see http://stackoverflow.com/questions/19305821/multiple-modals-overlay
  $(document).on('show.bs.modal', '.modal', function (event) {
    var zIndex = 1040 + (10 * $('.modal:visible').length);
    $(this).css('z-index', zIndex);
    setTimeout(function() {
      $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
    }, 0);
  });
  $(document).on('hidden.bs.modal', '.modal', function () { // This restores the scrolling ability of the underlying modal.
    $('.modal:visible').length && $(document.body).addClass('modal-open');
  });

  // To open application form
  $(".non-summer-university").on("click", function() {
    sessionStorage.setItem("student_type", "non_summer_university");
    openApplicationForm()
  });

  function openApplicationForm() {
    var class_times_collection = new ClassTimes();
    class_times_collection.fetch({
      success: function (class_times) {
        var student = new User();
console.log(class_times);
        var class_times = class_times.toJSON().sort(function (a, b) {
          if (a.order_no > b.order_no) {
            return 1;
          }
          if (a.order_no < b.order_no) {
            return -1;
          }
          // a must be equal to b
          return 0;
        });
console.log(class_times);
        this.applicationView = new ApplicationView({
          model: student,
          options: class_times
        });
        $("#applicationmodal").html(this.applicationView.render().el);
      },
      error: function (collection, response, options) {
        console.log("error");
      }
    });
  }

</script>












