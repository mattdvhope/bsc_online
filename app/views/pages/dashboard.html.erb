<% content_for(:title, "#{current_user.first_name} " + "#{current_user.last_name}")%>

<!-- script disables browser back button for this page -->
<script type = "text/javascript" >
  history.pushState(null, null, 'dashboard');
  window.addEventListener('popstate', function(event) {
    history.pushState(null, null, 'dashboard');
  });
</script>

<section class="bsc-container">
  <header>
    <h1>Welcome to the "City English Project"!!</h1>
    <hr>
    <h2>From here, you can request an American "Skype Conversation Partner."</h2>
    <% if current_user.volunteer? %>
      <hr>
      <h2>You are here in "volunteer" status.</h2>
    <% elsif current_user.role == "admin_applicant" %>
      <hr>
      <h2>You are here in "admin applicant" status.</h2>
    <% end %>
    <% if current_user.leader? %>
        <hr>
        <h2>You are here in "admin" status. In 'admin' status, you are allowed to review the "Volunteer Applications" that have come in so far.</h2>
      <hr>
      <hr>
      <% if AdminApplication.all == [] %>
        <h3> No applications now. </h3>
        <hr>
      <% end %>
      
      <% i = 0 %>
      <% @admin_applications.each do |application| %>
          <% i = i + 1 %>
          <h3><%= i.to_s + ". Applicant Name: " + "\"" + application.user.first_name + " " + application.user.last_name + "\"" %></h3>
          <hr>
          <h3><%= "Applicant City: " + "\"" + application.user.city + "\"" %></h3>
          <hr>
          <h3><%= "\"" + application.response_first + "\"" %></h3>
          <hr>
          <h3><%= "\"" + application.response_second + "\"" %></h3>
          <hr>
          <h3><%= "\"" + application.response_third + "\"" %></h3>
          <hr>

          <% if application.user.role == "admin" && application.approved %>
            <div id="approval-disapproval-buttons">
              <%= link_to "Approval Email sent -- can't edit", "#", :class => "btn btn-info mail-sent disabled", :style => "display: inline-block" %>
            </div>
          <% elsif application.user.role == "admin" && !application.approved %>
            <div id="approval-disapproval-buttons">
              <%= link_to "APPROVED-click to edit", "#", :class => "btn btn-success approved-button", :style => "display: inline-block" %>
              <%= link_to "DISAPPROVED-click to edit", "#", :class => "btn btn-danger disapproved-button", :style => "display: none" %>
              <%= link_to "Approve", "/users/#{application.user.id}/approve_admin", :class => "btn btn-success approve-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: none" %>
              <%= link_to "Disapprove", "/users/#{application.user.id}/disapprove_admin", :class => "btn btn-danger disapprove-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: none" %>
              <%= link_to "Send approval email -- can't change!!", "#", :class => "btn btn-info mail-to-admin", :style => "display: inline-block" %>
              <%= link_to "Approval Email sent -- can't edit", "#", :class => "btn btn-info mail-sent disabled", :style => "display: none" %>
          <% elsif application.user.role == "disapproved_admin" %>
            <div id="approval-disapproval-buttons">
              <%= link_to "APPROVED-click to edit", "#", :class => "btn btn-success approved-button", :style => "display: none" %>
              <%= link_to "DISAPPROVED-click to edit", "#", :class => "btn btn-danger disapproved-button", :style => "display: inline-block" %>
              <%= link_to "Approve", "/users/#{application.user.id}/approve_admin", :class => "btn btn-success approve-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: none" %>
              <%= link_to "Disapprove", "/users/#{application.user.id}/disapprove_admin", :class => "btn btn-danger disapprove-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: none" %>
              <%= link_to "Send approval email -- can't change!!", "#", :class => "btn btn-info mail-to-admin", :style => "display: none" %>
              <%= link_to "Approval Email sent -- can't edit", "#", :class => "btn btn-info mail-sent disabled", :style => "display: none" %>
            </div>
          <% else %>
            <div id="approval-disapproval-buttons">
              <%= link_to "APPROVED-click to edit", "#", :class => "btn btn-success approved-button", :style => "display: none" %>
              <%= link_to "DISAPPROVED-click to edit", "#", :class => "btn btn-danger disapproved-button", :style => "display: none" %>
              <%= link_to "Approve", "/users/#{application.user.id}/approve_admin", :class => "btn btn-success approve-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: inline-block" %>
              <%= link_to "Disapprove", "/users/#{application.user.id}/disapprove_admin", :class => "btn btn-danger disapprove-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: inline-block" %>
              <%= link_to "Send approval email -- can't change!!", "#", :class => "btn btn-info mail-to-admin", :style => "display: none" %>
              <%= link_to "Approval Email sent -- can't edit", "#", :class => "btn btn-info mail-sent disabled", :style => "display: none" %>
            </div>
          <% end %>

      <% end %>

    <% end %>


  </header>
          <hr>
          <hr>
</section>

<!--  -->