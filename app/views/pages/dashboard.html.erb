<% content_for(:title, "#{current_user.first_name} " + "#{current_user.last_name}")%>

<!-- script disables browser back button for this page -->
<script type = "text/javascript" >
  history.pushState(null, null, 'dashboard');
  window.addEventListener('popstate', function(event) {
    history.pushState(null, null, 'dashboard');
  });
</script>

<section class="bsc-container">


<% if current_user.leader? || current_user.admin? || current_user.volunteer? %>

<!-- Features -->
<div class="container-full features" id="features">
  <h2 class="text-center features-text">City English Project Online Network</h2>
  <div class="row">
     <div class="col-md-4">
        <a href="#"> 
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/On-site+classes.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>How Pray for CEP</h4>
          </div>
        </div>
      </a>
     </div>
     <div class="col-md-4"> 
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Line+Logo.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Volunteer Teams</h4>
          </div>
        </div>
     </div>
     <div class="col-md-4">
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Conversation.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Online Partnerships (Skype)</h4>
          </div>
        </div>
     </div>
  </div>
  <div class="row">
     <div class="col-md-4">  
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Conversation.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>English Chat Rooms and Online Forum</h4>
          </div>
        </div>
     </div>
     <div class="col-md-4">
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/On-site+classes.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Project Vision</h4>
          </div>
        </div>
     </div>
     <div class="col-md-4"> 
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Conversation.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>How to Promote CEP</h4>
          </div>
        </div>
     </div>
  </div>
  <h2 class="text-center features-text-bottom">In addition, we have plans for future classes, activities and much, much more!</h2>
</div> <!-- Features -->

<% else %>

<!-- Features -->
<div class="container-full features" id="features">
  <h2 class="text-center features-text">City English Project Online Network</h2>
  <div class="row">
     <div class="col-md-4"> 
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/On-site+classes.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Online Conversation Partner (Skype)</h4>
          </div>
        </div>
     </div>
     <div class="col-md-4"> 
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Line+Logo.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Online English Classes</h4>
          </div>
        </div>
     </div>
     <div class="col-md-4">
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Conversation.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Community English Forum</h4>
          </div>
        </div>
     </div>
  </div>
  <div class="row">
     <div class="col-md-4">  
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Conversation.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Online Conversation Groups</h4>
          </div>
        </div>
     </div>
     <div class="col-md-4">
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/On-site+classes.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>English Video Chat Room</h4>
          </div>
        </div>
     </div>
     <div class="col-md-4"> 
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Conversation.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Certificate Program</h4>
          </div>
        </div>
     </div>
  </div>
  <div class="row">
     <div class="col-md-4"> 
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Conversation.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Links to English Resources</h4>
          </div>
        </div>
     </div>
     <div class="col-md-4"> 
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Conversation.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>Discounts on partner English Programs</h4>
          </div>
        </div>
     </div>
     <div class="col-md-4"> 
        <div class="picturing">
          <img src="https://s3-ap-southeast-1.amazonaws.com/ccmcoversbsc/Conversation.png" alt="Class Scene" align="middle">
          <div class="col-md-13 col-sm-offset-1 col-md-offset-1 col-lg-offset-2 col-sm-10 icon-text-box">
            <h4>City Talk English Class Online</h4>
          </div>
        </div>
     </div>
  </div>
  </div>
  <h2 class="text-center features-text-bottom">In addition, we have plans for future classes, activities and much, much more!</h2>
</div> <!-- Features -->



<% end %>










  <header>
    <h1><%= "Welcome to the \"City English Project\", #{current_user.first_name}!!" %></h1>
    <% if current_user.admin? %>
      <hr>
      <h2>You are here in "admin" status.</h2>
    <% elsif current_user.volunteer? %>
      <hr>
      <h2>You are here in "volunteer" status.</h2>
    <% elsif current_user.role == "admin_applicant" %>
      <hr>
      <h2>You are here in "admin applicant" status.</h2>
    <% elsif current_user.role == "student" %>
      <hr>
      <h2>From here, you can request an American "Skype Conversation Partner."</h2>
      <hr>
      <h2>Here is a list of available Skype-partner English teachers. </h2>
      <ul>
        <% @english_teachers.each do |teacher| %>
          <li><h3>

            <span id="backbone-app">
              <%= link_to teacher.first_name + " " + teacher.last_name + " -- request " + "#{teacher.gender == 'male' ? 'him' : 'her'}" + " as a Skype teacher.", "/volunteers/" + teacher.email %>
            </span>

          </h3></li>
        <% end %>
      </ul>
    <% end %>

    <% if current_user.leader? %>
        <hr>
        <h2>You are here in "leader" status. In 'leader' status, you are allowed to review the "Volunteer Administrator Applications" that have come in so far. Each applicant that you 'Approve' here (ultimately, by sending the email), will recieve a PIN (within the email) which he or she can in turn pass out to potential volunteers.  When you press 'Approve', you will then see a light blue 'email' button which will send the PIN.</h2>
      <% if AdminApplication.all == [] %>
        <h3> No applications now. </h3>
        <hr>
      <% end %>
      
      <% i = 0 %>
      <% @admin_applications.each do |application| %>
          <hr>
          <hr>
          <% i = i + 1 %>
          <h3><%= i.to_s + ". Applicant Name: " + "\"" + application.user.first_name + " " + application.user.last_name + "\"" %></h3>
          <hr>
          <h3><%= "Applicant's City: " + "\"" + application.user.city + "\"" %></h3>
          <hr>
          <h3><%= "\"" + application.response_first + "\"" %></h3>
          <hr>
          <h3><%= "\"" + application.response_second + "\"" %></h3>
          <hr>
          <h3><%= "\"" + application.response_third + "\"" %></h3>
          <hr>

          <% if application.user.role == "admin" && application.approved %>
            <div id="email-sent-already">
              <%= link_to "Approval Email sent -- can't edit", "", :class => "btn btn-info mail-sent disabled", :style => "display: inline-block" %>
            </div>
          <% elsif application.user.role == "admin" && !application.approved %>
            <div id="approved-but-no-email-sent">
              <%= link_to "APPROVED-click to edit", "", :class => "btn btn-success approved-button", :style => "display: inline-block" %>
              <%= link_to "DISAPPROVED-click to edit", "", :class => "btn btn-danger disapproved-button", :style => "display: none" %>
              <%= link_to "Approve", "/users/#{application.user.id}/approve_admin", :class => "btn btn-success approve-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: none" %>
              <%= link_to "Disapprove", "/users/#{application.user.id}/disapprove_admin", :class => "btn btn-danger disapprove-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: none" %>
              <%= link_to "Send approval email -- can't change!!", "/admin_applications/#{application.id}/email_admin_application_approval", :class => "btn btn-info mail-to-admin", remote: true, :data => { :id => "#{application.id}" }, :style => "display: inline-block" %>
              <%= link_to "Approval Email sent -- can't edit", "", :class => "btn btn-info mail-sent disabled", :style => "display: none" %>
              <div style="display: none"><h3><%="PIN \"#{application.user.pin}\" emailed to \"#{application.user.first_name} #{application.user.last_name}\"" %></h3></div>
          <% elsif application.user.role == "disapproved_admin" %>
            <div id="disapproved-no-email-sent">
              <%= link_to "APPROVED-click to edit", "", :class => "btn btn-success approved-button", :style => "display: none" %>
              <%= link_to "DISAPPROVED-click to edit", "", :class => "btn btn-danger disapproved-button", :style => "display: inline-block" %>
              <%= link_to "Approve", "/users/#{application.user.id}/approve_admin", :class => "btn btn-success approve-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: none" %>
              <%= link_to "Disapprove", "/users/#{application.user.id}/disapprove_admin", :class => "btn btn-danger disapprove-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: none" %>
              <%= link_to "Send approval email -- can't change!!", "/admin_applications/#{application.id}/email_admin_application_approval", :class => "btn btn-info mail-to-admin", remote: true, :data => { :id => "#{application.id}" }, :style => "display: none" %>
              <%= link_to "Approval Email sent -- can't edit", "", :class => "btn btn-info mail-sent disabled", :style => "display: none" %>
              <div style="display: none"><h3><%="PIN \"#{application.user.pin}\" emailed to \"#{application.user.first_name} #{application.user.last_name}\"" %></h3></div>
            </div>
          <% else %>
            <div id="not-approved-or-disapproved-yet">
              <%= link_to "APPROVED-click to edit", "", :class => "btn btn-success approved-button", :style => "display: none" %>
              <%= link_to "DISAPPROVED-click to edit", "", :class => "btn btn-danger disapproved-button", :style => "display: none" %>
              <%= link_to "Approve", "/users/#{application.user.id}/approve_admin", :class => "btn btn-success approve-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: inline-block" %>
              <%= link_to "Disapprove", "/users/#{application.user.id}/disapprove_admin", :class => "btn btn-danger disapprove-admin", remote: true, :data => { :id => "#{application.user.id}" }, :style => "display: inline-block" %>
              <%= link_to "Send approval email -- can't change!!", "/admin_applications/#{application.id}/email_admin_application_approval", :class => "btn btn-info mail-to-admin", remote: true, :data => { :id => "#{application.id}" }, :style => "display: none" %>
              <%= link_to "Approval Email sent -- can't edit", "", :class => "btn btn-info mail-sent disabled", :style => "display: none" %>
              <div style="display: none"><h3><%="PIN \"#{application.user.pin}\" emailed to \"#{application.user.first_name} #{application.user.last_name}\"" %></h3></div>
            </div>
          <% end %>

      <% end %>

    <% end %>


  </header>
          <hr>
          <hr>
</section>

<div id="overlay">
  <!-- for .hbs templates (sessions & registration) -->
</div>


